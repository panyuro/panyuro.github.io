---
title: java知识点整理
date: 2022-08-16 09:28:59
tags: 整理
categories: java
---

### 死锁

- 定义：死锁是两个或两个以上的线程互相都持有对方所需要的资源，导致这些线程都处于等待状态。
- 死锁产生的条件：
  - 互斥条件：一个资源只能被一个进程占用。
  - 请求和保持条件：一个进程因请求被占用资源而发生阻塞时，对已获得的资源保持不变。
  - 不剥夺条件：任何一个资源在没被该进程释放之前，其他线程都无法对他剥夺占用。
  - 循环等待：当发生死锁时，所等待的线程会进入一个类似死循环，造成阻塞。

- 如何避免
  - 设置加锁顺序。当多个线程需要一些相同的锁时，按照不同的加锁顺序去加锁。这种需要你事先知道所有的锁，但某些情况是未知的。
  - 设置加锁时限。当一个线程在制定时限内没有获取到所需要的锁，则会释放已经获取到的锁，然后等待一段时间再重试。

- 
